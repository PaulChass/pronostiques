{% extends 'base.html.twig' %}

{% block title %}
{{ teams.0.Stats.Team }} VS {{ teams.1.Stats.Team}} - Pronostics / Statistiques / Tendances des équipes
{% endblock %}


{% block body %}
<h1 class="d-flex justify-content-center whitetitle"> Matchs de la nuit </h1>
{% include 'matchs_de_la_nuit.html.twig' %}

{% include 'navbar.html.twig' %}


<div class="container-fluid">
  <div class="row">
   <div class="col-lg-2 order-lg-first col-6  order-2  ">
      <a class="twitter-timeline" href="{{teams.0.twitter}}" data-chrome="transparent" data-tweet-limit="12">Twitter</a>
      <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    </div>
    <div class="col-lg-2 col-6 order-last">
      <a class="twitter-timeline" href="{{teams.1.twitter}}"  data-chrome="transparent" data-tweet-limit="12">Twitter</a>
      <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    </div>
    <div class="col-lg-8 col-10 col-sm-12 order-fisrt mx-auto">
      <h3  class="whitetitle"> Cotes </h3>
      <div class="form-group">
        <label for="exampleFormControlSelect1">Pari </label>
        <select class="form-control" id="exampleFormControlSelect1">
          <option>Face a Face</option>
          <option>En attente du retour des cotes</option>
          <option>Affichera la cote</option>
          <option>permet d'enregirstrer le pari</option>
          <option>et de comparer son roi aved des potos :-) </option>
        </select>
      </div>

      {% include 'intro.html.twig'%}


      <div>       
      <h3 id="equipes" class="whitetitle"> Stats des équipes </h3>
        {% include 'statarraytemplate.html.twig' with {'id': 'overall','home':teams.0.Stats,'away':teams.1.Stats,'hadvanced':teams.0.advancedStats,'aadvanced':teams.1.advancedStats, 'arrayTitle':'Stats Equipe par match ( classement )'} %}
        {% include 'statarraytemplate.html.twig' with {'id': 'last5','home':teams.0.stats5,'away':teams.1.stats5, 'arrayTitle':'Stats Equipe 5 Derniers ( différence )'} %}
        {% include 'statarraytemplate.html.twig' with {'id': 'location','home':teams.0.statsLocation,'away':teams.1.statsLocation, 'arrayTitle':'Stats domicile vs stats exterieur  ( classement  )'} %}
      </div>

      <div class="" > 
      <h3 id="tendances" class="whitetitle">Tendances 5 derniers matchs</h3>
      <div class="row">
        <div class="col col-md-6">
        {% for game in teams.0.last5games %}
         <table class="table table-dark " style="opacity:0.9">
          {% if game[6][4:1] == '@' %}
            {% set abv = game[6]|split(' @ ')%}
            {% set at = '@' %}
            {% else %}
            {% set abv = game[6]|split(' vs. ') %}
            {% set at = 'vs.' %}
            {% endif %}
             <tr style="justify-content:between; paddin-top:8rem; ">
              <td>
              <img style="height:3rem;"src="https://stats.nba.com/media/img/teams/logos/{{abv[0]}}_logo.svg" alt="Card image cap">
              </td><td style="position:relative;top:1rem;size:2rem;">{{ at }}</td>
              <td><img style="height:3rem;"src="https://stats.nba.com/media/img/teams/logos/{{abv[1]}}_logo.svg" alt="Card image cap">
              </td>
              <td class="card-title result " style="position:relative;{% if game[7]=='L'%}color:red;{% else %}color:lightgreen;{% endif %}">{{ game[26]}} - {{ game[26] - game[27] }}
              </td>
             </tr>
         </table>
        {% endfor %}
        </div>
       
        
        <div class="col">
       {% for game in teams.1.last5games %}
          <table class="table table-dark">
          
          {% if game[6][4:1] == '@' %}
            {% set abv = game[6]|split(' @ ')%}
            {% set at = '@' %}
            {% else %}
            {% set abv = game[6]|split(' vs. ') %}
            {% set at = 'vs.' %}
            {% endif %}
            <tr style="justify-content:space-between; paddin-top:8rem;">
              <td>
              <img style="height:3rem;"src="https://stats.nba.com/media/img/teams/logos/{{abv[0]}}_logo.svg" alt="Card image cap">
              </td><td style="position:relative;top:1rem;size:1.3rem;">{{ at }}</td>
              <td><img style="height:3rem;"src="https://stats.nba.com/media/img/teams/logos/{{abv[1]}}_logo.svg" alt="Card image cap">
              </td>
              <td  class="card-title result" style="position:relative;{% if game[7]=='L'%}color:red;{% else %}color:lightgreen;{% endif %}">{{ game[26]}} - {{ game[26] - game[27] }}
              </td>
            </tr>
          </table>
        {% endfor %}
        </div>
      </div>
      <div class="row d-flex justify-content-around flex-row">
        <div class="p-6 mx-auto">
         <img style="opacity:0.8;display:block;margin-top:10px;"src="data:image/png;base64, {{ graph.0 }}" /></div>
        <div class="p-6 mx-auto" >
      <img  style="opacity:0.8;display:block;margin-top:10px;" src="data:image/png;base64, {{ graph.1 }}" /> </div>
      </div>
      
      <h3 id="joueurs" class="whitetitle"> Stats des Joueurs </h3>
      {% include 'playerstats.html.twig' %}
      <h3 id="blessures" class="whitetitle"> Infirmerie </h3>
      <div id="injuredplayers" class="injuries">   
          
          <table class="table table-hover table-dark">
            <thead>
              <tr>
                <th scope="col"><img style="max-height:80px" src="https://stats.nba.com/media/img/teams/logos/{{teams.0.Stats.team_abv}}_logo.svg"/> Nom </th>
                <th scope="col"> Blessure</th>
                <th scope="col"> Statut</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                {% for blesse in teams.0.injuries %}
                <td> {{blesse.player}} </td>
                <td> {{blesse.injury}} </td>
                <td> {{blesse.status}} </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          <table class="table table-hover table-dark">
            <thead>
              <tr>
                <th scope="col"><img style="max-height:80px" src="https://stats.nba.com/media/img/teams/logos/{{teams.1.Stats.team_abv}}_logo.svg"/>
                Nom </th>
                    <th scope="col"> Blessure</th>
                <th scope="col"> Statut</th>
              </tr>
            </thead>
            <tbody>
              <tr>
              {% for blesse in teams.1.injuries %}
              
              <td> {{blesse.player}} </td>
              <td> {{blesse.injury}} </td>
              <td> {{blesse.status}} </td>
              </tr>
              {% endfor %}

            </tbody>
          </table>
      </div>

      <h3 id="highlights" class="whitetitle"> Highlights de la dernière rencontre </h3>
      <div class="youtube-player center-div">
          <figure style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; margin: 0px;">
          <iframe src="https://www.youtube.com/embed/{{game.videoId}}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" loading="lazy"></iframe>
          </figure>
      </div>

      
        
      <h3 id="pronostiques" class="whitetitle"> Partagez votre pronostique </h3>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            .
 
      <div class="container" >
            <div class="row">
              <div class="col-12">
               
                <div class="comments-list bg-dark" style="color:white">

                {% for comment in comments %}
                    <div class="media">
                
                          <a class="media-left" href="#">
                            <img src="http://lorempixel.com/40/40/people/{{random(3)}}/">
                          </a>
                          <div class="media-body">
                              
                            <h4 class="media-heading user_name">{{comment.username}}-{{comment.bet}}</h4>
                            {{comment.message}}
                            
                          </div>
                                                  <p class="pull-right"><small>{{ comment.PublishDate|date("h:i") }}</small></p>

                    </div>
                  {% endfor %}
                </div>
              </div>
            </div>
      </div>

        
        
        
      <div class="container">
        {{ form(form) }}
      </div>
      

    </div>
   

  </div>
 
</div>        
  <div style="margin-top:200px;">    {% include 'matchs_de_la_nuit.html.twig' %}</div>
{% endblock %}